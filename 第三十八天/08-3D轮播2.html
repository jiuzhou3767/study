<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>08-3D轮播2</title>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        img{
            border:0;
        }
        ol, ul ,li{list-style: none;}
               *{margin: 0;padding: 0;}
        .carousel{
            width: 640px;
            height: 360px;
            border: 1px solid #000;
            margin:100px auto;
            position: relative;
        }
        .carousel ul{list-style:none;}
        .carousel ul li{
            position: absolute;
            width: 128px;
            height: 360px;
            top:0;
            left:0;
            perspective:50000px;
        }
        .carousel ul li section{
            width: 128px;
            height: 360px;
            position: relative;
            transform-style:preserve-3d;
            transition:all 1s;
        }
        .carousel ul li div{
            position: absolute;
            width: 128px;
            height: 360px;
            top:0;
            left:0;
        }
        .carousel ul li div:nth-of-type(1){
            transform:translateZ(180px);
            background: url(images/gl/1.jpg) no-repeat;
        }
        .carousel ul li div:nth-of-type(2){
            transform:rotateX(90deg) translateZ(180px);
            background: url(images/gl/2.jpg) no-repeat;
        }
        .carousel ul li div:nth-of-type(3){
            transform:rotateX(180deg) translateZ(180px);
            background: url(images/gl/3.jpg) no-repeat;
        }
        .carousel ul li div:nth-of-type(4){
            transform:rotateX(-90deg) translateZ(180px);
            background: url(images/gl/4.jpg) no-repeat;
        }
        .carousel .btns a{
            width: 40px;
            height: 40px;
            background: orange;
            border-radius:50%;
            position: absolute;
            top:50%;
            margin-top:-20px;
            z-index:10;
        }
        .carousel .btns a:nth-of-type(1){left:10px;}
        .carousel .btns a:nth-of-type(2){right:10px;}
    </style>
</head>
<body>
    <div class="carousel">
        <ul>

        </ul>
        <div class="btns">
            <a href="##"></a>
            <a href="##"></a>
        </div>
    </div>
</body>
</html>
<script type="text/javascript" src="js/zepto.js"></script>
<script type="text/javascript">
     var str = "<li><section><div></div><div></div><div></div><div></div></section></li>";
     for(var i = 0;i < 5;i++){
        $(str).appendTo('.carousel ul');
     }
     $('.carousel ul li section div').css('background-size','640px 360px');
     $('.carousel ul li').each(function(i){
        $(this).css('left',i * 640 / 5 );
        $(this).find('div').css('background-position',-640/5*i+'px 0px')
     });

     $('.carousel section').each(function(i){
        $(this).css('transition-delay',i * 0.2+'s');
     });

     var deg = 0;
     var lock = true;
     $('.btns a:nth-of-type(2)').click(function(){
        if(!lock){return};
        lock = false;
        deg -=90;
        $('.carousel section').css('transform','rotateX('+deg+'deg)');
        lock = true;
     });


</script>