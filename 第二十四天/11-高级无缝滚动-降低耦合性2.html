<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>11-高级无缝滚动-降低耦合性2</title>
    <style type="text/css">
          *{
            margin: 0;
            padding: 0;
        }
        ul{
            list-style: none;
        }
        .rolling{
            width: 800px;
            height: 130px;
            border: 10px solid #ccc;
            margin: 100px auto;
            position: relative;
            overflow: hidden;
        }
        .rolling .m_unit{
            /*这是运动的单位*/
            /*这个宽度足以致命，为了让所有的li能够并排*/
            /*这个宽度随便取，大一点*/
            width: 5000px;
            position: absolute;
            top: 0;
            left: 0;
        }
        .rolling ul li{
            float: left;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="rolling" id="rolling">
        <div class="m_unit" id="m_unit">
            <ul>
                <li><a href=""><img src="images/shuzi/0.png" /></a></li>
                <li><a href=""><img src="images/shuzi/1.png" /></a></li>
                <li><a href=""><img src="images/shuzi/2.png" /></a></li>
                <li><a href=""><img src="images/shuzi/3.png" /></a></li>
                <li><a href=""><img src="images/shuzi/4.png" /></a></li>
                <li><a href=""><img src="images/shuzi/5.png" /></a></li>
            </ul>
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
     var rolling = document.getElementById('rolling');
     var m_unit = document.getElementById('m_unit');
     var listUl = m_unit.getElementsByTagName('ul')[0];
     var lis = m_unit.getElementsByTagName('li');
        listUl.innerHTML += listUl.innerHTML;
     var listLength = m_unit.getElementsByTagName('li').length;
     var imgs = listUl.getElementsByTagName('img');
     console.log(listLength);
     var timer;
    var nowLeft = 0;
    var zhefandian;
     var count = 0;
     for(var i = 0;i < imgs.length; i++){
        imgs[i].onload = function(){
            count++;
            if(count == imgs.length){
                zhefandian = lis[listLength / 2].offsetLeft;
                console.log(zhefandian);

            }
        }
     }



    rolling.onmouseover = function(){
        clearInterval(timer);
    }

    rolling.onmouseout = function(){
        move();
    }

    function move(){
        timer = setInterval(function(){
            nowLeft -= 3;
            if(nowLeft < - zhefandian){
                nowLeft = 0;
            }
            m_unit.style.left = nowLeft + 'px';
        },10);
    }
    move();

</script>